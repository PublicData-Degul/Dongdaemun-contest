"use client";

import Script from "next/script";
import { useEffect, useState } from "react";
import Papa from "papaparse";

export default function KakaoMapPage() {
  const [isLoaded, setIsLoaded] = useState(false);
  const [map, setMap] = useState<any>(null);
  const [streetTree, setStreetTree] = useState<{ lat: number; lng: number }[]>(
    []
  );

  // ê°€ë¡œìˆ˜ CSV ë¶ˆëŸ¬ì˜¤ê¸°
  useEffect(() => {
    fetch("/streetTree.csv")
      .then((res) => res.text())
      .then((text) => {
        Papa.parse(text, {
          header: true,
          skipEmptyLines: true,
          complete: function (results) {
            const parsed = results.data as any[];
            const points = parsed.map((row) => ({
              lat: parseFloat(row["ìˆ˜ëª©ìœ„ë„"]),
              lng: parseFloat(row["ìˆ˜ëª©ê²½ë„"]),
            }));
            setStreetTree(points);
          },
        });
      });
  }, []);

  // ì§€ë„ ì´ˆê¸°í™”
  const initMap = () => {
    const container = document.getElementById("map");
    const options = {
      center: new window.kakao.maps.LatLng(37.5744, 127.0395),
      level: 4,
    };

    const newMap = new window.kakao.maps.Map(container, options);
    setMap(newMap);

    // ì¤‘ì‹¬ ë§ˆì»¤
    const centerPosition = new window.kakao.maps.LatLng(37.5744, 127.0395);
    new window.kakao.maps.Marker({
      position: centerPosition,
      map: newMap,
    });

    // ğŸ’™ í•™êµ ë§ˆì»¤
    const markerPositions = [
      { lat: 37.5739950231496, lng: 127.073890977298, title: "ì„œìš¸ì¥í‰ì´ˆ" },
      { lat: 37.5923093987643, lng: 127.055908478798, title: "ì„œìš¸ì²­ëŸ‰ì´ˆ" },
      { lat: 37.6018964867149, lng: 127.064885003959, title: "ì„œìš¸ì´ë¬¸ì´ˆ" },
      { lat: 37.5764049847235, lng: 127.0283819823, title: "ì„œìš¸ìš©ë‘ì´ˆ" },
      { lat: 37.5688043221289, lng: 127.055427038114, title: "ì„œìš¸ë‹µì‹­ë¦¬ì´ˆ" },
      { lat: 37.586120384461, lng: 127.039414975087, title: "ì„œìš¸í™íŒŒì´ˆ" },
      { lat: 37.5641223174494, lng: 127.060523298508, title: "ì„œìš¸êµ°ìì´ˆ" },
      { lat: 37.5746852353644, lng: 127.054397292161, title: "ì„œìš¸ì „ë†ì´ˆ" },
      { lat: 37.58008416213, lng: 127.066871936075, title: "ì„œìš¸ë°°ë´‰ì´ˆ" },
      { lat: 37.5784502701654, lng: 127.076003088926, title: "ì€ì„ì´ˆ" },
      { lat: 37.5896941349867, lng: 127.0482485373, title: "ì„œìš¸ì‚¼ìœ¡ì´ˆ" },
      { lat: 37.5807042921469, lng: 127.056012445216, title: "ì„œìš¸ì „ê³¡ì´ˆ" },
      { lat: 37.5823074106355, lng: 127.031856383108, title: "ì„œìš¸ì¢…ì•”ì´ˆ" },
      { lat: 37.5727046089059, lng: 127.042961687519, title: "ì„œìš¸ì‹ ë‹µì´ˆ" },
      { lat: 37.5715014215127, lng: 127.06403409435, title: "ì„œìš¸ë™ë‹µì´ˆ" },
      { lat: 37.5906875196186, lng: 127.047705124334, title: "ì„œìš¸í™ë¦‰ì´ˆ" },
      { lat: 37.5790832853249, lng: 127.060805297019, title: "ì„œìš¸ì „ë™ì´ˆ" },
      { lat: 37.565968213548, lng: 127.072033422513, title: "ì„œìš¸ì•ˆí‰ì´ˆ" },
      { lat: 37.5856754144498, lng: 127.057916891964, title: "ì„œìš¸íœ˜ê²½ì´ˆ" },
      { lat: 37.5939491407769, lng: 127.054890960564, title: "ê²½í¬ì´ˆ" },
      { lat: 37.5856764110055, lng: 127.070041638322, title: "ì„œìš¸íœ˜ë´‰ì´ˆ" },
      { lat: 37.5939491407769, lng: 127.054890960564, title: "ê²½í¬ì¤‘" },
      { lat: 37.5738482581785, lng: 127.043896480723, title: "ìˆ­ì¸ì¤‘" },
      { lat: 37.5882192071931, lng: 127.050622549806, title: "ì²­ëŸ‰ì¤‘" },
      { lat: 37.5668596067189, lng: 127.070477570556, title: "ì¥í‰ì¤‘" },
      { lat: 37.5818502321361, lng: 127.033850440748, title: "ì„±ì¼ì¤‘" },
      { lat: 37.5745220668493, lng: 127.051994343436, title: "ë™ëŒ€ë¬¸ì¤‘" },
      { lat: 37.5825001768201, lng: 127.058379516351, title: "ì „ì¼ì¤‘" },
      { lat: 37.5819005156881, lng: 127.067434080061, title: "íœ˜ê²½ì—¬ì¤‘" },
      { lat: 37.5870929876308, lng: 127.061746113577, title: "íœ˜ê²½ì¤‘" },
      { lat: 37.5779549391135, lng: 127.025328234604, title: "ëŒ€ê´‘ì¤‘" },
      { lat: 37.586048641672, lng: 127.041070321981, title: "ì •í™”ì—¬ì¤‘" },
      { lat: 37.5861935915453, lng: 127.070929087368, title: "ì „ë™ì¤‘" },
      { lat: 37.5820442761539, lng: 127.059279434844, title: "ì „ë†ì¤‘" },
      {
        lat: 37.5780471818476,
        lng: 127.075133018965,
        title: "ë™êµ­ëŒ€í•™êµì‚¬ë²”ëŒ€í•™ ë¶€ì†ì¤‘",
      },
      { lat: 37.5939491407769, lng: 127.054890960564, title: "ê²½í¬ì—¬ì¤‘" },
      { lat: 37.5939491407769, lng: 127.054890960564, title: "ê²½í¬ì—¬ê³ " },
      { lat: 37.5777320687093, lng: 127.047655876816, title: "ì²­ëŸ‰ì •ë³´ê³ " },
      {
        lat: 37.5818725994505,
        lng: 127.056976879173,
        title: "í•´ì„±êµ­ì œì»¨ë²¤ì…˜ê³ ",
      },
      { lat: 37.5821227010138, lng: 127.047209103701, title: "ì •ì•”ë¯¸ìš©ê³ " },
      { lat: 37.5818725994505, lng: 127.056976879173, title: "í•´ì„±ì—¬ìê³ " },
      { lat: 37.586048641672, lng: 127.041070321981, title: "ì„œìš¸ì •í™”ê³ " },
      { lat: 37.5851530128648, lng: 127.069450940954, title: "ì„œìš¸ë°˜ë„ì²´ê³ " },
      { lat: 37.5939491407769, lng: 127.054890960564, title: "ê²½í¬ê³ " },
      { lat: 37.5888860047887, lng: 127.051310950177, title: "ì²­ëŸ‰ê³ " },
      { lat: 37.5863723553049, lng: 127.068940658438, title: "íœ˜ë´‰ê³ " },
      { lat: 37.5819005156881, lng: 127.067434080061, title: "íœ˜ê²½ì—¬ìê³ " },
      { lat: 37.5779549391135, lng: 127.025328234604, title: "ëŒ€ê´‘ê³ " },
      {
        lat: 37.5780471818476,
        lng: 127.075133018965,
        title: "ë™êµ­ëŒ€í•™êµ ì‚¬ë²”ëŒ€í•™ ë¶€ì†ê³ ",
      },
      { lat: 37.5751432705208, lng: 127.071666424993, title: "ìƒˆì¼ë¬¸ìœ ì¹˜ì›" },
      { lat: 37.5806284683372, lng: 127.052798088901, title: "ë°±ì£¼ìœ ì¹˜ì›" },
      { lat: 37.5773472429026, lng: 127.064386983555, title: "ì˜ˆì¼ìœ ì¹˜ì›" },
      { lat: 37.5755060418781, lng: 127.049695860484, title: "ì‚¼ì„±ìœ ì¹˜ì›" },
      {
        lat: 37.5790832853249,
        lng: 127.060805297019,
        title: "ì„œìš¸ì „ë™ì´ˆë“±í•™êµë³‘ì„¤ìœ ì¹˜ì›",
      },
      { lat: 37.5883932941526, lng: 127.039218485863, title: "ìëŒìœ ì¹˜ì›" },
      { lat: 37.5856754144498, lng: 127.057916891964, title: "ì„œìš¸íœ˜ê²½ìœ ì¹˜ì›" },
      { lat: 37.5722517408702, lng: 127.060502369282, title: "í•œì–‘ìœ ì¹˜ì›" },
      { lat: 37.5710568281709, lng: 127.075113657819, title: "ì„¸í•˜ìœ ì¹˜ì›" },
      { lat: 37.6007507501532, lng: 127.068769452719, title: "ì„œìš¸ìœ ì¹˜ì›" },
      { lat: 37.5651958543852, lng: 127.063775155288, title: "ì‚¬êµ°ììœ ì¹˜ì›" },
      { lat: 37.5926776807408, lng: 127.054067865832, title: "ì‚°ì •í˜„ìœ ì¹˜ì›" },
      { lat: 37.5746094744702, lng: 127.060129124176, title: "íŒŒìŠ¤í…”ìœ ì¹˜ì›" },
      { lat: 37.5731026565696, lng: 127.031584630503, title: "ì‹ ë™ì•„ìœ ì¹˜ì›" },
      { lat: 37.5828193166314, lng: 127.068739369277, title: "ì•„ì´ë¹„ìœ ì¹˜ì›" },
      { lat: 37.5880281566858, lng: 127.049226158581, title: "ì‚¬ë‘ìœ ì¹˜ì›" },
      { lat: 37.5929409000658, lng: 127.059420443026, title: "ì ¬ë§ˆìœ ì¹˜ì›" },
      { lat: 37.5830669346508, lng: 127.034777091582, title: "ì†Œí™”ìœ ì¹˜ì›" },
      { lat: 37.570069317441, lng: 127.059860257139, title: "ê·¸ë¦¼ìœ ì¹˜ì›" },
      { lat: 37.5904911969788, lng: 127.041496116551, title: "í™ë¦‰ìœ ì¹˜ì›" },
      {
        lat: 37.5739950231496,
        lng: 127.073890977298,
        title: "ì„œìš¸ì¥í‰ì´ˆë“±í•™êµë³‘ì„¤ìœ ì¹˜ì›",
      },
      { lat: 37.5945383139746, lng: 127.064317773941, title: "ê·œì „ìœ ì¹˜ì›" },
      {
        lat: 37.586120384461,
        lng: 127.039414975087,
        title: "ì„œìš¸í™íŒŒì´ˆë“±í•™êµë³‘ì„¤ìœ ì¹˜ì›",
      },
      {
        lat: 37.5856764110055,
        lng: 127.070041638322,
        title: "ì„œìš¸íœ˜ë´‰ì´ˆë“±í•™êµë³‘ì„¤ìœ ì¹˜ì›",
      },
      { lat: 37.5766590358858, lng: 127.061567688813, title: "ìƒˆì†Œë¦¬ìœ ì¹˜ì›" },
      {
        lat: 37.5688043221289,
        lng: 127.055427038114,
        title: "ì„œìš¸ë‹µì‹­ë¦¬ì´ˆë“±í•™êµë³‘ì„¤ìœ ì¹˜ì›",
      },
      {
        lat: 37.5641223174494,
        lng: 127.060523298508,
        title: "ì„œìš¸êµ°ìì´ˆë“±í•™êµë³‘ì„¤ìœ ì¹˜ì›",
      },
      { lat: 37.5925383443867, lng: 127.056844152107, title: "ë™ì•ˆìœ ì¹˜ì›" },
      { lat: 37.5791219819217, lng: 127.053850210023, title: "ë¹›ë‚˜ìœ ì¹˜ì›" },
      { lat: 37.5939491407769, lng: 127.054890960564, title: "ê²½í¬ìœ ì¹˜ì›" },
      { lat: 37.6018964867149, lng: 127.064885003959, title: "ì„œìš¸ì´ë¬¸ìœ ì¹˜ì›" },
      { lat: 37.5790073735728, lng: 127.075833615308, title: "ì •ì›ìœ ì¹˜ì›" },
      {
        lat: 37.5807042921469,
        lng: 127.056012445216,
        title: "ì„œìš¸ì „ê³¡ì´ˆë“±í•™êµë³‘ì„¤ìœ ì¹˜ì›",
      },
      { lat: 37.5702600120377, lng: 127.057598419026, title: "ë¼ì˜¨ìœ ì¹˜ì›" },
      { lat: 37.5826703077969, lng: 127.034809512872, title: "ê°€ëŒì–´ë¦°ì´ì§‘" },
      { lat: 37.5630691100573, lng: 127.069116799927, title: "ê°€ì˜¨ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5937443884234,
        lng: 127.053223139329,
        title: "ê²½í¬ëŒ€í•™êµì§ì¥ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5934496635461,
        lng: 127.050161166654,
        title: "ê²½í¬ì˜ë£Œì› ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.6007507501532, lng: 127.068769452719, title: "ê·œí˜„ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5775880431542,
        lng: 127.042841437254,
        title: "ê·¸ë¼ì‹œì—˜ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5862119387672, lng: 127.06355328121, title: "ê·¸ë¦°ì–´ë¦°ì´ì§‘" },
      { lat: 37.5750602669676, lng: 127.041684865419, title: "ê¸€ìƒ˜ì–´ë¦°ì´ì§‘" },
      { lat: 37.5776689312604, lng: 127.073145743574, title: "ê¸¸í„°ì–´ë¦°ì´ì§‘" },
      { lat: 37.5703967570742, lng: 127.068448809636, title: "ê¼¬ê¼¬ë§ˆì–´ë¦°ì´ì§‘" },
      { lat: 37.5633286766681, lng: 127.068516365557, title: "ê¼¬ë§ˆë³„ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5728549565736,
        lng: 127.052401156065,
        title: "ê¼¬ë§ˆìˆ²ì•„ë ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5750720968253, lng: 127.074282139153, title: "ê¿€ë²Œì–´ë¦°ì´ì§‘" },
      { lat: 37.5766590358858, lng: 127.061567688813, title: "ê¿ˆë™ì‚°ì–´ë¦°ì´ì§‘" },
      { lat: 37.5728549565736, lng: 127.052401156065, title: "ê¿ˆë™ì´ì–´ë¦°ì´ì§‘" },
      { lat: 37.5710568281709, lng: 127.075113657819, title: "ê¿ˆë‘¥ì´ì–´ë¦°ì´ì§‘" },
      { lat: 37.5855023686525, lng: 127.054043541688, title: "ê¿ˆë§ˆë£¨ì–´ë¦°ì´ì§‘" },
      { lat: 37.6007507501532, lng: 127.068769452719, title: "ê¿ˆìŸì´ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5767163112994,
        lng: 127.049782134969,
        title: "ë…¸ë¸”ë ˆìŠ¤ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5763379008361,
        lng: 127.074572635161,
        title: "ëˆ„ë¦¬ë³´ë“¬ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5755060418781,
        lng: 127.049695860484,
        title: "ëŠí‹°ë‚˜ë¬´ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5916037201805, lng: 127.062931601394, title: "ëŠ˜ë´„ì–´ë¦°ì´ì§‘" },
      { lat: 37.5841999794101, lng: 127.049102948529, title: "ëŠ˜ì‚¬ë‘ì–´ë¦°ì´ì§‘" },
      { lat: 37.5720742467292, lng: 127.047273509268, title: "ëŠ˜í‘¸ë¥¸ì–´ë¦°ì´ì§‘" },
      { lat: 37.5710568281709, lng: 127.075113657819, title: "ë‹¤ì‚¬ë‘ì–´ë¦°ì´ì§‘" },
      { lat: 37.5755060418781, lng: 127.049695860484, title: "ë‹¤ì˜¨ì–´ë¦°ì´ì§‘" },
      { lat: 37.5755060418781, lng: 127.049695860484, title: "ë‹¤í•¨ì–´ë¦°ì´ì§‘" },
      { lat: 37.5751633645646, lng: 127.047579638931, title: "ë‹¨ë¹„ì–´ë¦°ì´ì§‘" },
      { lat: 37.6049031022538, lng: 127.063706436409, title: "ëŒ€ë¦¼ ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5711406437048,
        lng: 127.064400996804,
        title: "ëŒ€ë¦¼ëŠ˜í‘¸ë¥¸ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5755519113019,
        lng: 127.06699625602,
        title: "ë”ë¶ˆì–´ìˆ²ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.573110330347, lng: 127.069601745357, title: "ë°ì‹œì•™ì–´ë¦°ì´ì§‘" },
      { lat: 37.5787795328827, lng: 127.059800662877, title: "ë„ë‹´ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5648696383895,
        lng: 127.062360937768,
        title: "ë™ê·¸ë¼ë¯¸ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.575323586988,
        lng: 127.039172801787,
        title: "ë™ëŒ€ë¬¸êµ¬ì²­ì§ì¥ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.571191352366, lng: 127.051184932115, title: "ë™ëŒ€ë¬¸ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.569890008745,
        lng: 127.061631957974,
        title: "ë™ì•„ê°œêµ¬ìŸì´ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.569890008745, lng: 127.061631957974, title: "ë™ì•„ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5890453957672,
        lng: 127.060259620825,
        title: "ë™í™”ë§ˆì„ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5887014845076, lng: 127.060264438629, title: "ë™í™”ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5991201612927,
        lng: 127.060849796043,
        title: "ë¼ê·¸ë€ë°ê¿ˆë³„ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.599823362368,
        lng: 127.061241161796,
        title: "ë¼ê·¸ë€ë°ìŠ¬í•˜ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.599823362368,
        lng: 127.061241161796,
        title: "ë¼ê·¸ë€ë°ì€í•˜ìˆ˜ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5734678565527, lng: 127.035306481469, title: "ë¼ì˜¨ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5728549565736,
        lng: 127.052401156065,
        title: "ë˜ë¯¸ì•ˆìœ„ë¸Œì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5794976614097,
        lng: 127.030492933066,
        title: "ë¦¬ì¹˜ì˜ˆì„±ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5717153101844, lng: 127.076044353452, title: "ë©”ê½ƒì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5733430631896,
        lng: 127.055281769593,
        title: "ë¯¸ë“œì¹´ìš´í‹°ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5804396384081,
        lng: 127.070226360962,
        title: "ë¯¸ì†Œê°€ë“í•œì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.585795975342,
        lng: 127.046260607883,
        title: "ë¯¸ì£¼í‚¤ì¦ˆì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5811608197249, lng: 127.070635734566, title: "ë°°ë´‰ì–´ë¦°ì´ì§‘" },
      { lat: 37.5723432877087, lng: 127.068567978354, title: "ë³„ë°­ì–´ë¦°ì´ì§‘" },
      { lat: 37.5710568281709, lng: 127.075113657819, title: "ë³„ì´ˆë¡±ì–´ë¦°ì´ì§‘" },
      { lat: 37.5978134973025, lng: 127.065482975741, title: "ë³´ë¦¼ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5710568281709,
        lng: 127.075113657819,
        title: "ë¸Œë ˆì¸ì—ë“€ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5791219819217, lng: 127.053850210023, title: "ë¹›ë‚˜ì–´ë¦°ì´ì§‘" },
      { lat: 37.5779675484397, lng: 127.063441896132, title: "ë¹›ì´ˆë¡±ì–´ë¦°ì´ì§‘" },
      { lat: 37.5651093012247, lng: 127.063881591368, title: "ì‚¬êµ°ìì–´ë¦°ì´ì§‘" },
      { lat: 37.5930356072908, lng: 127.060984794097, title: "ì‚¬ë‘ìƒ˜ì–´ë¦°ì´ì§‘" },
      { lat: 37.5883932941526, lng: 127.039218485863, title: "ì‚¬ë‘ì–´ë¦°ì´ì§‘" },
      { lat: 37.603660660258, lng: 127.070026447776, title: "ì‚¬ë‘í•´ì–´ë¦°ì´ì§‘" },
      { lat: 37.5712875989328, lng: 127.06824485099, title: "ì‚¼ì„±ì–´ë¦°ì´ì§‘" },
      { lat: 37.58280297036, lng: 127.055452585633, title: "ì‚¼ì„±ì˜ì¬ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5862119387672,
        lng: 127.06355328121,
        title: "ì‚¼ìœ¡ì„œìš¸ë³‘ì›ì§ì¥ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5832360364758, lng: 127.071898008969, title: "ìƒˆì‹¹ì–´ë¦°ì´ì§‘" },
      { lat: 37.5876923033213, lng: 127.05368892811, title: "ìƒˆí•˜ëŠ˜ì–´ë¦°ì´ì§‘" },
      { lat: 37.5883932941526, lng: 127.039218485863, title: "ìƒ˜í„°ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5825775765293,
        lng: 127.059988126984,
        title: "ì„œìš¸ì‹œë¦½ëŒ€í•™êµì§ì¥ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5899979987381, lng: 127.06553172159, title: "ì„¸ë¹›ì–´ë¦°ì´ì§‘" },
      { lat: 37.5728549565736, lng: 127.052401156065, title: "ì†”ìƒ˜ìˆ²ì–´ë¦°ì´ì§‘" },
      { lat: 37.5820674007335, lng: 127.074159232857, title: "ì†”ì†”ì–´ë¦°ì´ì§‘" },
      { lat: 37.5683341759006, lng: 127.071971407361, title: "ì†”í–¥ê¸°ì–´ë¦°ì´ì§‘" },
      { lat: 37.5750720968253, lng: 127.074282139153, title: "ì†¡ë¦¼ì–´ë¦°ì´ì§‘" },
      { lat: 37.5792492672171, lng: 127.045331070581, title: "ìŠ¤ì¹´ì´ì–´ë¦°ì´ì§‘" },
      { lat: 37.5967735276868, lng: 127.064913280434, title: "ì‹ ë‚˜ëŠ”ì–´ë¦°ì´ì§‘" },
      { lat: 37.5901684571627, lng: 127.05156387144, title: "ì‹ í˜„ëŒ€ì–´ë¦°ì´ì§‘" },
      { lat: 37.5779549391135, lng: 127.025328234604, title: "ì•„ëœ°ì–´ë¦°ì´ì§‘" },
      { lat: 37.5668181232225, lng: 127.072180369911, title: "ì•„ë¼ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5665636427987,
        lng: 127.059842623827,
        title: "ì•„ë¥´í…Œí¬ë ˆì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5713911532894, lng: 127.063004129431, title: "ì•„ì´ê¿ˆì–´ë¦°ì´ì§‘" },
      { lat: 37.5668181232225, lng: 127.072180369911, title: "ì•„ë¼ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5798417442215,
        lng: 127.026808531973,
        title: "ì—˜ë¦¬ë‹ˆí‹°ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5760786999487, lng: 127.070440523729, title: "ì—°ì„¸ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5782603928595,
        lng: 127.060658702909,
        title: "ì—´ë¦°ë°©ê³¼í›„ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5766593234367, lng: 127.047035619751, title: "ì˜ì‹ ì–´ë¦°ì´ì§‘" },
      { lat: 37.5857459123073, lng: 127.039473311969, title: "ì˜ˆë‚˜ì–´ë¦°ì´ì§‘" },
      { lat: 37.5731026565696, lng: 127.031584630503, title: "ì˜ˆë‹®ì–´ë¦°ì´ì§‘" },
      { lat: 37.5688266327284, lng: 127.071720138684, title: "ì˜ˆë“ ì–´ë¦°ì´ì§‘" },
      { lat: 37.5749076420442, lng: 127.055085613697, title: "ì˜ˆëœ°ì–´ë¦°ì´ì§‘" },
      { lat: 37.5728549565736, lng: 127.052401156065, title: "ì˜ˆì€ì–´ë¦°ì´ì§‘" },
      { lat: 37.6049031022538, lng: 127.063706436409, title: "ì˜ˆì¼ì–´ë¦°ì´ì§‘" },
      { lat: 37.5755060418781, lng: 127.049695860484, title: "ì˜ˆì§€ìŠ¬ì–´ë¦°ì´ì§‘" },
      { lat: 37.5763379008361, lng: 127.074572635161, title: "ì˜ˆì§€ì–´ë¦°ì´ì§‘" },
      { lat: 37.5794357911595, lng: 127.03141681182, title: "ìš©ë‘ë™ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5796826388654,
        lng: 127.026363333093,
        title: "ìš©ë‘í¬ë§ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5832421212008,
        lng: 127.047816079107,
        title: "ìš°ë¦¬ëˆ„ë¦¬ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5750621283917,
        lng: 127.066522402213,
        title: "ìš°ì„±ê·¸ë¦°ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5711423064389, lng: 127.057701202252, title: "ìš°ì•„ì„¸ì–´ë¦°ì´ì§‘" },
      { lat: 37.5665625256918, lng: 127.057188313736, title: "ìœ„ë¸Œì–´ë¦°ì´ì§‘" },
      { lat: 37.5882337488082, lng: 127.047052186477, title: "ìœ ë§ˆì–´ë¦°ì´ì§‘" },
      { lat: 37.6031629394921, lng: 127.063354117613, title: "ì´ë¬¸ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.6012567008701,
        lng: 127.069768152771,
        title: "ì´ë¬¸í˜„ëŒ€ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5883932941526, lng: 127.039218485863, title: "ì´ì†ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.6049031022538,
        lng: 127.063706436409,
        title: "ì´í¸í•œì˜¤ë Œì§€ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5700719269179, lng: 127.072704548522, title: "ì´í™”ì–´ë¦°ì´ì§‘" },
      { lat: 37.5763245487038, lng: 127.065813277511, title: "ìì—°ì–´ë¦°ì´ì§‘" },
      { lat: 37.5641124204702, lng: 127.069497391137, title: "ì¥ì•ˆì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5710568281709,
        lng: 127.075113657819,
        title: "ì¥ì•ˆí˜„ëŒ€ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5766676769978,
        lng: 127.055016043596,
        title: "ì „ë†ë°©ê³¼í›„ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5750720968253,
        lng: 127.074282139153,
        title: "ì¡°ì•¤ì•„ì´ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5697768024358, lng: 127.059248769922, title: "ì¡°ì€ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.6040334801759,
        lng: 127.066778762818,
        title: "ì¤‘ì•™ì‚ì•„ì œì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5766590358858, lng: 127.061567688813, title: "ì¤‘ì•™ì–´ë¦°ì´ì§‘" },
      { lat: 37.5766590358858, lng: 127.061567688813, title: "ì¦ê±°ìš´ì–´ë¦°ì´ì§‘" },
      { lat: 37.568366951236, lng: 127.059016060525, title: "ì§€ë‹ˆë§˜ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5880281566858,
        lng: 127.049226158581,
        title: "ì²œì‚¬ë‚˜ë¼ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5864153011557,
        lng: 127.046987185633,
        title: "ì²œì‘ë°©ê³¼í›„ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5722901232255,
        lng: 127.029916868494,
        title: "ì²­ê³„í¬ë ˆì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5861958030225, lng: 127.040986280458, title: "ì²­ëŸ‰ë¦¬ì–´ë¦°ì´ì§‘" },
      { lat: 37.5746094744702, lng: 127.060129124176, title: "ì²­ì†”ì–´ë¦°ì´ì§‘" },
      { lat: 37.5715355323262, lng: 127.04615896391, title: "ì²­ì•„ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.573837565013,
        lng: 127.045486724541,
        title: "ì´ˆë¡±í•˜ë‚˜ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5750720968253,
        lng: 127.074282139153,
        title: "ì¹¼ë¹„í…Œì˜ì¬ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5826703077969,
        lng: 127.034809512872,
        title: "í‚¤ì¦ˆë¸Œë¼ìš´ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5909683833441,
        lng: 127.068673152616,
        title: "í‚¨ë”ë² ë² ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5740562919533,
        lng: 127.045342412457,
        title: "íƒœì–‘í•˜ë‚˜ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5710568281709, lng: 127.075113657819, title: "íŒŒë‘ìƒˆì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5677702572124,
        lng: 127.058401410042,
        title: "íŒŒí¬ìì´ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5642445787945,
        lng: 127.071488919715,
        title: "í¬ë¥´í…Œëª¬í…Œì†Œë¦¬ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5668181232225,
        lng: 127.072180369911,
        title: "í‘¸ë¥¸ë‚˜ë¬´ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5689435029739,
        lng: 127.066945172212,
        title: "í‘¸ë¥¸í•˜ëŠ˜ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5728549565736, lng: 127.052401156065, title: "í•˜ë‘ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5950367073325,
        lng: 127.046322831171,
        title: "í•œêµ­êµ­ë°©ì—°êµ¬ì› ì§ì¥ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5990520361954,
        lng: 127.057083059798,
        title: "í•œêµ­ì™¸êµ­ì–´ëŒ€í•™êµì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5961851201092, lng: 127.056631100192, title: "í•œë¹›ì–´ë¦°ì´ì§‘" },
      { lat: 37.5880281566858, lng: 127.049226158581, title: "í•œì‹ ì–´ë¦°ì´ì§‘" },
      { lat: 37.5750720968253, lng: 127.074282139153, title: "í•œì•„ë¦„ì–´ë¦°ì´ì§‘" },
      { lat: 37.5710568281709, lng: 127.075113657819, title: "í•œìš¸ì–´ë¦°ì´ì§‘" },
      { lat: 37.5717569033905, lng: 127.067660158684, title: "í•´ë¦¬ì–´ë¦°ì´ì§‘" },
      { lat: 37.5810844885174, lng: 127.072300899697, title: "í•´ë§‘ì€ì–´ë¦°ì´ì§‘" },
      { lat: 37.5832360364758, lng: 127.071898008969, title: "í•´ì†”ì–´ë¦°ì´ì§‘" },
      { lat: 37.5840209857522, lng: 127.034196960692, title: "í•´ì˜¤ë¦„ì–´ë¦°ì´ì§‘" },
      { lat: 37.5832360364758, lng: 127.071898008969, title: "í•´ì°¬ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5648987351718,
        lng: 127.065042716716,
        title: "í•´í”¼íŠ¸ë¦¬ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5766590358858, lng: 127.061567688813, title: "í–‡ë‹˜ì–´ë¦°ì´ì§‘" },
      { lat: 37.5773472429026, lng: 127.064386983555, title: "í–‡ë¹›ì–´ë¦°ì´ì§‘" },
      { lat: 37.5728202499933, lng: 127.036978926783, title: "í–‡ì‚´ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5754722861294,
        lng: 127.037112346823,
        title: "í—ˆë¸Œë¦¬ì¸ ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5763379008361,
        lng: 127.074572635161,
        title: "í˜„ëŒ€ì°¸ì‚¬ë‘ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5728549565736, lng: 127.052401156065, title: "í˜¸ìˆ˜ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5783342071942,
        lng: 127.060438346864,
        title: "í™€ì¸ ì•¤í‚¤ì¦ˆì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5918837104542,
        lng: 127.053708696779,
        title: "íšŒê¸°í•˜ë‚˜ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5832360364758, lng: 127.071898008969, title: "íš¨ë¦¼ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.593701245652,
        lng: 127.064897703345,
        title: "íœ˜ê²½SKë·°ì–´ë¦°ì´ì§‘",
      },
      {
        lat: 37.5914880558506,
        lng: 127.057776577597,
        title: "íœ˜ê²½ìŠ¤ë§ˆì¼ì–´ë¦°ì´ì§‘",
      },
      { lat: 37.5887655669609, lng: 127.058791788697, title: "íœ˜ê²½ì–´ë¦°ì´ì§‘" },
      { lat: 37.5720742467292, lng: 127.047273509268, title: "íœ´ì‚¬ë‘ì–´ë¦°ì´ì§‘" },
      {
        lat: 37.5871742821863,
        lng: 127.069938991404,
        title: "ì„œìš¸íŠ¹ë³„ì‹œ ë™ëŒ€ë¬¸êµ¬ ì¥ì•ˆë²šê½ƒë¡œ 323",
      },
      {
        lat: 37.5830461915113,
        lng: 127.048169864241,
        title: "ê¿ˆìëŒê³µë™ìœ¡ì•„ë°© ì²­ëŸ‰ë¦¬ì ",
      },
      {
        lat: 37.5837210015443,
        lng: 127.034655235628,
        title: "ê¿ˆìëŒê³µë™ìœ¡ì•„ë°© ì œê¸°ì ",
      },
      {
        lat: 37.5862857103438,
        lng: 127.035156404234,
        title: "ê¿ˆìëŒê³µë™ìœ¡ì•„ë°© ì œê¸°2í˜¸ì ",
      },
      {
        lat: 37.5736571669728,
        lng: 127.067545846933,
        title: "ê¿ˆìëŒê³µë™ìœ¡ì•„ë°© ì¥ì•ˆ2í˜¸ì ",
      },
      {
        lat: 37.5723432877087,
        lng: 127.068567978354,
        title: "ê¿ˆìëŒê³µë™ìœ¡ì•„ë°© ì¥ì•ˆ1í˜¸ì ",
      },
      {
        lat: 37.5722901232255,
        lng: 127.029916868494,
        title: "ê¿ˆìëŒê³µë™ìœ¡ì•„ë°© ìš©ì‹ ì ",
      },
      {
        lat: 37.578443110427,
        lng: 127.06273508839,
        title: "ê¿ˆìëŒê³µë™ìœ¡ì•„ë°© ë°°ë´‰ì‚°ì ",
      },
      {
        lat: 37.5720456892425,
        lng: 127.047933777839,
        title: "ê¿ˆìëŒê³µë™ìœ¡ì•„ë°© ë‹µì‹­ë¦¬ì ",
      },
      {
        lat: 37.5749076420442,
        lng: 127.055085613697,
        title: "ê¿ˆìëŒê³µë™ìœ¡ì•„ë°© ë‹µì‹­ë¦¬2í˜¸ì ",
      },
    ];
    markerPositions.forEach((loc) => {
      const position = new window.kakao.maps.LatLng(loc.lat, loc.lng);
      const content = `<div style="font-size: 24px;">ğŸ’™</div>`;
      new window.kakao.maps.CustomOverlay({
        position,
        content,
        yAnchor: 1,
        map: newMap,
      });
    });

    // â¤ï¸ ë…¸ì¸ë³µì§€ ë§ˆì»¤
    const elderly = [
      { lat: 37.57829744, lng: 127.0421996 },
      { lat: 37.56663423, lng: 127.0683889 },
      { lat: 37.57716395, lng: 127.0358094 },
      { lat: 37.56670169, lng: 127.056713 },
      { lat: 37.57640519, lng: 127.0473915 },
      { lat: 37.56990735, lng: 127.0576235 },
      { lat: 37.57016097, lng: 127.0495161 },
      { lat: 37.58419171, lng: 127.0456969 },
      { lat: 37.58526339, lng: 127.0347349 },
      { lat: 37.58279487, lng: 127.0433833 },
      { lat: 37.57435891, lng: 127.031927 },
      { lat: 37.57415402, lng: 127.0451904 },
      { lat: 37.58751632, lng: 127.0427076 },
      { lat: 37.59025847, lng: 127.0620398 },
      { lat: 37.57922666, lng: 127.074006 },
      { lat: 37.58152415, lng: 127.0377483 },
      { lat: 37.5814977, lng: 127.0364792 },
      { lat: 37.57612882, lng: 127.0420167 },
      { lat: 37.5682068, lng: 127.0548 },
      { lat: 37.57675797, lng: 127.0248888 },
      { lat: 37.57631848, lng: 127.0665157 },
      { lat: 37.58936957, lng: 127.060972 },
      { lat: 37.5683536, lng: 127.0674649 },
      { lat: 37.58724711, lng: 127.0500267 },
      { lat: 37.58402099, lng: 127.034197 },
      { lat: 37.57728491, lng: 127.0301471 },
      { lat: 37.57228156, lng: 127.0695085 },
      { lat: 37.58294483, lng: 127.0437714 },
      { lat: 37.5842018, lng: 127.050552 },
      { lat: 37.57996239, lng: 127.068052 },
      { lat: 37.58621194, lng: 127.0635533 },
      { lat: 37.58607579, lng: 127.0420193 },
      { lat: 37.57473888, lng: 127.0325123 },
      { lat: 37.60315837, lng: 127.065295 },
      { lat: 37.5821361, lng: 127.0388933 },
      { lat: 37.57631749, lng: 127.0661948 },
      { lat: 37.5733599, lng: 127.0663218 },
      { lat: 37.57585054, lng: 127.044914 },
      { lat: 37.5862721, lng: 127.0339466 },
      { lat: 37.57298904, lng: 127.0699287 },
      { lat: 37.58646751, lng: 127.0410668 },
      { lat: 37.5837983, lng: 127.0383136 },
      { lat: 37.56864896, lng: 127.0632061 },
      { lat: 37.57600766, lng: 127.0714122 },
      { lat: 37.57549907, lng: 127.0709115 },
      { lat: 37.5786945, lng: 127.0564585 },
      { lat: 37.56570315, lng: 127.0671339 },
      { lat: 37.57017349, lng: 127.0576471 },
      { lat: 37.59848092, lng: 127.0618727 },
      { lat: 37.57125705, lng: 127.0694906 },
      { lat: 37.57512329, lng: 127.0488588 },
      { lat: 37.57268267, lng: 127.0589395 },
      { lat: 37.57276248, lng: 127.068801 },
      { lat: 37.57265459, lng: 127.0750703 },
      { lat: 37.58067787, lng: 127.0519176 },
      { lat: 37.58577859, lng: 127.0416619 },
      { lat: 37.57887851, lng: 127.0556411 },
      { lat: 37.56520017, lng: 127.0631218 },
      { lat: 37.6001268, lng: 127.0673903 },
      { lat: 37.57268283, lng: 127.0591464 },
      { lat: 37.57058465, lng: 127.0570303 },
    ];
    elderly.forEach((loc) => {
      const position = new window.kakao.maps.LatLng(loc.lat, loc.lng);
      const content = `<div style="font-size: 24px;">â¤ï¸</div>`;
      new window.kakao.maps.CustomOverlay({
        position,
        content,
        yAnchor: 1,
        map: newMap,
      });
    });

    // ğŸŒ³ ê°€ë¡œìˆ˜ ë§ˆì»¤
    const streetTreeMarkers: any[] = [];
    streetTree.forEach((tree) => {
      const position = new window.kakao.maps.LatLng(tree.lat, tree.lng);
      const content = `<div style="font-size: 20px; opacity: 0.2;">ğŸŒ³</div>`;
      const overlay = new window.kakao.maps.CustomOverlay({
        position,
        content,
        yAnchor: 1,
      });
      overlay.setMap(newMap);
      streetTreeMarkers.push(overlay);
    });

    // ì¤Œ ë³€ê²½ ì‹œ ë§ˆì»¤ ë‹¤ì‹œ ì„¸íŒ…
    window.kakao.maps.event.addListener(newMap, "zoom_changed", () => {
      streetTreeMarkers.forEach((overlay) => {
        overlay.setMap(newMap);
      });
    });
  };

  // ì§€ë„ í¬ê¸° ì¬ì¡°ì •
  useEffect(() => {
    if (map) {
      window.kakao.maps.event.addListener(map, "tilesloaded", () => {
        map.relayout();
      });
    }
  }, [map]);

  // ì¹´ì¹´ì˜¤ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œë˜ë©´ ì§€ë„ ì´ˆê¸°í™”
  useEffect(() => {
    if (isLoaded && !map && streetTree.length > 0) {
      window.kakao.maps.load(() => {
        initMap();
      });
    }
  }, [isLoaded, map, streetTree]);

  return (
    <div>
      <Script
        src={`https://dapi.kakao.com/v2/maps/sdk.js?appkey=${process.env.NEXT_PUBLIC_KAKAOMAP_API_KEY}&autoload=false`}
        strategy="afterInteractive"
        onLoad={() => setIsLoaded(true)}
      />
      <div
        className="map-container"
        id="map"
        style={{ width: "100%", height: "90vh" }}
      ></div>
    </div>
  );
}
